<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disponibles - Accesorios by Faty</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Estilo para los botones alineados */
        .cart-row {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }
        .btn-cart { flex: 1; } /* El botón de añadir ocupa el espacio sobrante */
        
        .btn-wishlist {
            background-color: white;
            border: 2px solid #ff6b6b;
            color: #ff6b6b;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
        }
        .btn-wishlist:hover {
            background-color: #ff6b6b;
            color: white;
        }
        /* Ajuste para móvil */
        @media (max-width: 480px) {
            .cart-row { flex-direction: row; } 
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-wrapper">
                <img src="logotipo.png.png" alt="Logo">
                <div class="title-container">
                    <h1>Accesorios</h1>
                    <h2>by faty</h2>
                </div>
            </div>
            <div class="right-group">
                <div class="icons-container">
                    <a href="index.html" class="icon-link"><i class="fa-solid fa-house"></i></a>
                    <a href="login.html" class="icon-link" id="user-link"><i class="fa-regular fa-user"></i></a>
                    <a href="https://goo.gl/maps/uytQGQUzdPxbK42b9" class="icon-link" target="_blank"><i class="fa-solid fa-location-dot"></i></a>
                    <a href="carrito.html" style="text-decoration: none;">
                        <div class="cart-wrapper">
                            <i class="fa-solid fa-cart-shopping"></i>
                            <span class="cart-badge" id="cart-count">0</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <main>
        <h3 class="section-title">Productos Disponibles</h3>
        
<section id="monos-ninos" class="products-section">
    <h3 class="products-title">Moños para Niños</h3>
    <div class="products-grid">
        
        <div class="product-card">
            <div class="product-image"><img src="moño-1.png.png" alt="Moño 1"></div>
            <div class="product-info">
                <h5>Moño con aplique 1</h5>
                <div class="product-buttons">
                    <div class="cart-row" style="display: flex; gap: 8px; margin-bottom: 10px;">
                        <button class="btn-cart" data-name="Moño con aplique 1" data-price="25000" style="flex: 1;">Añadir al Carrito</button>
                        <button class="btn-wishlist" data-name="Moño con aplique 1" data-price="25000" title="Guardar en favoritos" style="background: white; border: 2px solid #ff6b6b; color: #ff6b6b; padding: 8px 12px; border-radius: 8px; cursor: pointer;">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <a href="https://wa.me/595986898428?text=Hola!%20Me%20interesa%20consultar%20por%20el%20*Moño%20con%20aplique%201*" class="btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                </div>
            </div>
        </div>

        <div class="product-card">
            <div class="product-image"><img src="moño-2.png.png" alt="Moño 2"></div>
            <div class="product-info">
                <h5>Moño con aplique 2</h5>
                <div class="product-buttons">
                    <div class="cart-row" style="display: flex; gap: 8px; margin-bottom: 10px;">
                        <button class="btn-cart" data-name="Moño con aplique 2" data-price="25000" style="flex: 1;">Añadir al Carrito</button>
                        <button class="btn-wishlist" data-name="Moño con aplique 2" data-price="25000" title="Guardar en favoritos" style="background: white; border: 2px solid #ff6b6b; color: #ff6b6b; padding: 8px 12px; border-radius: 8px; cursor: pointer;">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <a href="https://wa.me/595986898428?text=Hola!%20Me%20interesa%20consultar%20por%20el%20*Moño%20con%20aplique%202*" class="btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                </div>
            </div>
        </div>

        <div class="product-card">
            <div class="product-image"><img src="moño-3.png.png" alt="Moño 3"></div>
            <div class="product-info">
                <h5>Moño con aplique 3</h5>
                <div class="product-buttons">
                    <div class="cart-row" style="display: flex; gap: 8px; margin-bottom: 10px;">
                        <button class="btn-cart" data-name="Moño con aplique 3" data-price="30000" style="flex: 1;">Añadir al Carrito</button>
                        <button class="btn-wishlist" data-name="Moño con aplique 3" data-price="30000" title="Guardar en favoritos" style="background: white; border: 2px solid #ff6b6b; color: #ff6b6b; padding: 8px 12px; border-radius: 8px; cursor: pointer;">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <a href="https://wa.me/595986898428?text=Hola!%20Me%20interesa%20consultar%20por%20el%20*Moño%20con%20aplique%203*" class="btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                </div>
            </div>
        </div>

        <div class="product-card">
            <div class="product-image"><img src="moño-4.png.png" alt="Moño 4"></div>
            <div class="product-info">
                <h5>Moño con aplique 4</h5>
                <div class="product-buttons">
                    <div class="cart-row" style="display: flex; gap: 8px; margin-bottom: 10px;">
                        <button class="btn-cart" data-name="Moño con aplique 4" data-price="28000" style="flex: 1;">Añadir al Carrito</button>
                        <button class="btn-wishlist" data-name="Moño con aplique 4" data-price="28000" title="Guardar en favoritos" style="background: white; border: 2px solid #ff6b6b; color: #ff6b6b; padding: 8px 12px; border-radius: 8px; cursor: pointer;">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <a href="https://wa.me/595986898428?text=Hola!%20Me%20interesa%20consultar%20por%20el%20*Moño%20con%20aplique%204*" class="btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                </div>
            </div>
        </div>

        <div class="product-card">
            <div class="product-image"><img src="moño-5.png.png" alt="Moño 5"></div>
            <div class="product-info">
                <h5>Moño con aplique 5</h5>
                <div class="product-buttons">
                    <div class="cart-row" style="display: flex; gap: 8px; margin-bottom: 10px;">
                        <button class="btn-cart" data-name="Moño con aplique 5" data-price="35000" style="flex: 1;">Añadir al Carrito</button>
                        <button class="btn-wishlist" data-name="Moño con aplique 5" data-price="35000" title="Guardar en favoritos" style="background: white; border: 2px solid #ff6b6b; color: #ff6b6b; padding: 8px 12px; border-radius: 8px; cursor: pointer;">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <a href="https://wa.me/595986898428?text=Hola!%20Me%20interesa%20consultar%20por%20el%20*Moño%20con%20aplique%205*" class="btn-whatsapp" target="_blank">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                </div>
            </div>
        </div>

    </div>
</section>
    </main>

<script>
    // --- VARIABLES GLOBALES DEL JUEGO ---
    let score = 0;
    let isJumping = false;

    // --- FUNCIONES DEL JUEGO (Afuera para que funcionen bien) ---
    function jump() {
        const player = document.getElementById('player-monito');
        if (isJumping || !player) return;
        isJumping = true;
        player.style.bottom = "80px"; 
        setTimeout(() => {
            player.style.bottom = "0";
            isJumping = false;
        }, 300);
    }

    function startGame() {
        const cactus = document.getElementById('cactus');
        const player = document.getElementById('player-monito');
        const scoreText = document.getElementById('score-text');
        score = 0;
        let cactusPos = -50;
        
        let gameLoop = setInterval(() => {
            if (document.getElementById('offline-game-container').style.display === 'none') {
                clearInterval(gameLoop); // Detener si vuelve el internet
                return;
            }

            cactusPos += 5; 
            if (cactusPos > 350) {
                cactusPos = -50;
                score++;
                scoreText.innerText = "Puntos: " + score;
            }
            cactus.style.right = cactusPos + "px";

            let playerBottom = parseInt(window.getComputedStyle(player).getPropertyValue("bottom"));
            if (cactusPos > 240 && cactusPos < 280 && playerBottom < 30) {
                alert("¡Oh no! Chocaste. Puntos finales: " + score);
                score = 0;
                scoreText.innerText = "Puntos: 0";
                cactusPos = -50;
            }
        }, 20);
    }

    // --- LÓGICA PRINCIPAL AL CARGAR LA PÁGINA ---
    document.addEventListener('DOMContentLoaded', () => {
        // --- MANEJO DE CONEXIÓN ---
        const gameContainer = document.getElementById('offline-game-container');
        
        window.addEventListener('offline', () => {
            gameContainer.style.display = 'block';
            startGame();
        });

        window.addEventListener('online', () => {
            gameContainer.style.display = 'none';
        });

        // Controles
        document.addEventListener('keydown', (e) => { if(e.code === "Space") jump(); });
        gameContainer.addEventListener('touchstart', (e) => {
            e.preventDefault(); // Evita zoom al tocar rápido
            jump();
        });

        // --- CARRITO, USUARIO Y FAVORITOS (Tu código anterior) ---
        const logueado = localStorage.getItem('isLoggedIn');
        const nombre = localStorage.getItem('usuarioLogueado');
        if (logueado === 'true' && nombre) {
            document.getElementById('user-link').innerHTML = `<span style="color: white; font-weight: bold; font-size: 13px;">Hola, ${nombre}</span>`;
        }

        let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
        let favoritos = JSON.parse(localStorage.getItem('favoritos')) || [];
        const badge = document.getElementById('cart-count');

        function actualizarBadge() {
            badge.innerText = carrito.reduce((sum, item) => sum + item.cantidad, 0);
        }

        document.querySelectorAll('.btn-cart').forEach(boton => {
            boton.addEventListener('click', () => {
                const nombreProd = boton.getAttribute('data-name');
                const precioProd = parseInt(boton.getAttribute('data-price'));
                const existente = carrito.find(p => p.nombre === nombreProd);
                if (existente) { existente.cantidad++; } 
                else { carrito.push({ nombre: nombreProd, precio: precioProd, cantidad: 1 }); }
                localStorage.setItem('carrito', JSON.stringify(carrito));
                actualizarBadge();
                boton.innerText = "¡Añadido! ✓";
                setTimeout(() => boton.innerText = "Añadir al Carrito", 1000);
            });
        });

        document.querySelectorAll('.btn-wishlist').forEach(boton => {
            boton.addEventListener('click', () => {
                const nombreProd = boton.getAttribute('data-name');
                const precioProd = parseInt(boton.getAttribute('data-price'));
                if (!favoritos.find(p => p.nombre === nombreProd)) {
                    favoritos.push({ nombre: nombreProd, precio: precioProd });
                    localStorage.setItem('favoritos', JSON.stringify(favoritos));
                    boton.innerHTML = '<i class="fa-solid fa-heart"></i>';
                    boton.style.backgroundColor = "#ff6b6b";
                    boton.style.color = "white";
                } else {
                    alert("Este producto ya está en tus favoritos.");
                }
            });
        });

        actualizarBadge();
    });
</script>
    <div id="offline-game-container" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#f3eaff; z-index:9999; text-align:center; padding-top:50px; font-family:sans-serif;">
    <h2 style="color:#435D78;">¡Ups! Te quedaste sin conexión</h2>
    <p style="color:#666;">Mientras vuelve el internet, ¡ayuda al moño a saltar!</p>
    <div id="game-canvas" style="width:300px; height:150px; border-bottom:3px solid #435D78; margin:50px auto; position:relative; overflow:hidden; background: white; border-radius: 10px;">
        <div id="player-monito" style="width:40px; height:40px; position:absolute; bottom:0; left:20px; transition: bottom 0.3s;">
            <img src="logotipo.png.png" style="width:100%; height:100%; object-fit:contain;">
        </div>
        <div id="cactus" style="width:20px; height:30px; background:#435D78; position:absolute; bottom:0; right:-50px; border-radius: 5px 5px 0 0;"></div>
    </div>
    <p>Toca la pantalla o presiona <b>Espacio</b> para saltar</p>
    <p id="score-text" style="font-weight:bold; color:#d1acff;">Puntos: 0</p>
    <button onclick="location.reload()" style="margin-top:20px; padding:10px 20px; background:#435D78; color:white; border:none; border-radius:20px;">Reintentar conexión</button>
</div>
</body>
</html>