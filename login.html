<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesión - Accesorios by Faty</title>
    <link rel="stylesheet" href="styles2.css"> 
</head>
<body>
    <div class="login-container">
        <form class="login-form" id="formularioLogin">
            <h2>Iniciar Sesión</h2>
            <p>Ingresa tus datos para continuar</p>
            
            <div class="input-group">
                <label>Correo Electrónico</label>
                <input type="email" id="emailLogin" placeholder="ejemplo@correo.com" required>
            </div>

            <div class="input-group">
                <label>Tu Contraseña</label>
                <input type="password" id="passLogin" placeholder="********" required>
            </div>

            <button type="submit" class="btn-login">Entrar</button>
            
            <a href="registro.html" class="back-link">¿No tienes cuenta? Regístrate aquí</a>
            <br>
            <a href="index.html" class="back-link">← Volver a la tienda</a>
        </form>
    </div>

    <script>
        const loginForm = document.getElementById('formularioLogin');

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault(); 

            const email = document.getElementById('emailLogin').value;
            const pass = document.getElementById('passLogin').value;
            
            // 1. Traemos la lista de usuarios
            const usuariosRegistrados = JSON.parse(localStorage.getItem('usuariosRegistrados')) || {};

            // 2. VERIFICACIÓN DE SEGURIDAD
            if (usuariosRegistrados[email]) {
                // Si el correo existe, verificamos la contraseña
                if (usuariosRegistrados[email] === pass) {
                    const nombreUsuario = email.split('@')[0];

                    localStorage.setItem('usuarioLogueado', nombreUsuario);
                    localStorage.setItem('isLoggedIn', 'true');

                    alert('¡Bienvenida de nuevo, ' + nombreUsuario + '!');
                    window.location.href = 'index.html'; 
                } else {
                    alert('Contraseña incorrecta. Por favor, verifica tus datos.');
                }
            } else {
                // 3. SI NO EXISTE EL CORREO
                alert('Este correo no está registrado. ¿Quieres crear una cuenta?');
                window.location.href = 'registro.html'; 
            }
        });
    </script>
</body>
</html>